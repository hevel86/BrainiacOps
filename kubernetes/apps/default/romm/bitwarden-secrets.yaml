# kubernetes/infrastructure/tailscale/secret.yaml
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  # Use a descriptive name for the BitwardenSecret object
  name: romm-secrets
  namespace: default
  labels:
    app.kubernetes.io/name: romm
    app.kubernetes.io/instance: romm
spec:
  # This is the corrected name for the Kubernetes secret
  secretName: romm-secrets
  
  # Your Bitwarden organization ID
  organizationId: "9f7b77c1-18f7-4dc8-b252-b274015d6c40"

  # Reference to the auth token secret you created
  authToken:
    secretName: bw-auth-token
    secretKey: token

  # Map the Bitwarden secret to the key in the K8s secret
  map:
    # romm secrets
    - bwSecretId: "d4f19cc0-3d3b-4f53-a67a-b34f00d91c2b"
      secretKeyName: ROMM_AUTH_SECRET_KEY
    - bwSecretId: "ac483d61-c1ad-4248-9713-b34f00e80a51"
      secretKeyName: SCREENSCRAPER_USER
    - bwSecretId: "a787de53-0a2b-4721-879d-b34f00e81ca5"
      secretKeyName: SCREENSCRAPER_PASSWORD
    - bwSecretId: "83be8720-ea1e-4c9f-bd15-b34f00e6e0c9"
      secretKeyName: RETROACHIEVEMENTS_API_KEY
    - bwSecretId: "c0305815-25f4-42a3-a7ab-b34f00d9053e"
      secretKeyName: STEAMGRIDDB_API_KEY
    
    # romm-db secrets
    - bwSecretId: "29b722b8-5bca-4c7f-9ae8-b34f00d953e5"
      secretKeyName: MARIADB_ROOT_PASSWORD
    - bwSecretId: "76d3d9dc-966b-4a70-8638-b34f00e5b811"
      secretKeyName: MARIADB_PASSWORD
