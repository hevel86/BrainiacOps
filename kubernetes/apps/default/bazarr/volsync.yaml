# kubernetes/apps/default/bazarr/volsync.yaml
apiVersion: volsync.backube/v1alpha1
kind: ReplicationSource
metadata:
  name: bazarr-backup
  namespace: default
spec:
  sourcePVC: bazarr-config
  trigger:
    schedule: "0 */6 * * *"
  restic:
    # 1. Point to the GLOBAL secret for the password
    repository: volsync-restic-secret

    # 2. Point to the GLOBAL PVC for the backup destination
    destinationPVC: volsync-backup-repo-pvc

    # 3. CRITICAL: Define a UNIQUE subdirectory for this app's backup
    subPath: bazarr

    copyMethod: Snapshot
    volumeSnapshotClassName: longhorn-snapshot-class
    retain:
      hourly: 24
      daily: 7
      weekly: 4
