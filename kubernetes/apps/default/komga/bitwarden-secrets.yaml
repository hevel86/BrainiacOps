# kubernetes/apps/default/komga/volsync-repo-secret.yaml
# Produces a Secret named `volsync-restic-komga` with the two required keys
# for a pvc:// restic repo on NFS.
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  name: volsync-restic-komga
  namespace: default
spec:
  secretName: volsync-restic-komga
  organizationId: "9f7b77c1-18f7-4dc8-b274015d6c40"
  authToken:
    secretName: bw-auth-token
    secretKey: token
  map:
    # Existing BW item for your restic password
    - bwSecretId: "9e0e9c6d-b7c3-4434-9cfe-b343013718b2"
      secretKeyName: RESTIC_PASSWORD
    # Create a BW item whose value is:
    #   pvc://volsync-backup-repo-pvc?subPath=komga
    # and put its item ID below
    - bwSecretId: "dc3157b9-bfd8-4740-97a8-b34d012084a0"
      secretKeyName: RESTIC_REPOSITORY
