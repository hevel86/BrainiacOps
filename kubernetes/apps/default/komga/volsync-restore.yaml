# kubernetes/apps/default/komga/volsync-restore.yaml
apiVersion: volsync.backube/v1alpha1
kind: ReplicationDestination
metadata:
  name: komga-restore
  namespace: default
  annotations:
    argocd.argoproj.io/sync-wave: "20"
spec:
  # Bump this value to re-run a restore via GitOps
  trigger:
    manual: init-1
  restic:
    # Use the same Secret as backups
    repository: volsync-restic-komga
    # Restore directly into the app PVC
    destinationPVC: komga-config-lh
    moverSecurityContext:
      runAsUser: 1000
      runAsGroup: 1000
      fsGroup: 1000

