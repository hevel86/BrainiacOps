# kubernetes/infrastructure/tailscale/secret.yaml
apiVersion: k8s.bitwarden.com/v1
kind: BitwardenSecret
metadata:
  # Use a descriptive name for the BitwardenSecret object
  name: nebula-sync-secrets
  namespace: default
spec:
  # This is the corrected name for the Kubernetes secret
  secretName: nebula-sync-secrets
  
  # Your Bitwarden organization ID
  organizationId: "9f7b77c1-18f7-4dc8-b252-b274015d6c40"

  # Reference to the auth token secret you created
  authToken:
    secretName: bw-auth-token
    secretKey: token

  # Map the Bitwarden secret to the key in the K8s secret
  map:
    - bwSecretId: "32348a02-7f8f-4fd4-afeb-b3400116d7f8"
      secretKeyName: PRIMARY
    - bwSecretId: "51fe8321-7442-44f3-9dd9-b3400116fced"
      secretKeyName: REPLICAS