# kubernetes/apps/default/pihole/values.yaml

image:
  repository: pihole/pihole
  tag: "2025.08.0"
  pullPolicy: IfNotPresent

serviceDns:
  mixedService: true
  type: LoadBalancer
  port: 53
  externalTrafficPolicy: Local
  loadBalancerIP: 10.0.0.213
  annotations:
    metallb.universe.tf/allow-shared-ip: pihole

serviceDhcp:
  enabled: false

serviceWeb:
  type: LoadBalancer
  externalTrafficPolicy: Local
  loadBalancerIP: 10.0.0.213
  annotations:
    metallb.universe.tf/allow-shared-ip: pihole

DNS1: "1.1.1.1"
DNS2: "1.0.0.1"

hostname: pihole-k3s

podDnsConfig:
  enabled: true
  policy: "None"
  nameservers:
    - 127.0.0.1
    - 1.1.1.1
    - 1.0.0.1

persistentVolumeClaim:
  enabled: true
  existingClaim: pihole-pvc

resources:
  requests:
    cpu: 250m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

capabilities:
  add:
    - NET_ADMIN

admin:
  enabled: true
  existingSecret: pihole-credentials
  passwordKey: FTLCONF_webserver_api_password

extraEnvVars:
  FTLCONF_dns_listeningMode: "all"
  TZ: America/New_York
  FTLCONF_ignore_localhost: "yes"
  FTLCONF_local_ipv4: "10.0.0.213"

extraEnvVarsSecret:
  FTLCONF_webserver_api_password:
    name: pihole-credentials
    key: FTLCONF_webserver_api_password
