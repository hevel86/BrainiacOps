democratic-csi:
  csiDriver:
    name: org.democratic-csi.nfs
  storageClasses:
    - name: truenas-nfs
      defaultClass: false
      reclaimPolicy: Delete
      volumeBindingMode: Immediate
      allowVolumeExpansion: true
      parameters: {}
  controller:
    enabled: true
  node:
    enabled: false   # NFS = no node daemon needed
  driver:
    config:
      driver: freenas-nfs
      instance_id: truenas
      httpConnection:
        protocol: http             # or https
        host: truenas1-nfs.torquasmvo.internal     # e.g., truenas1.torquasmvo.internal
        port: 80                   # or 443 for https
        apiKey: ${TRUENAS_API_KEY} # from Secret/Env
        allowInsecure: true        # set false if you use proper TLS
      zfs:
        datasetParentName: media/k3stor   # e.g., media/k3stor
        detachedSnapshotsDatasetParentName: ""
        datasetEnableQuotas: true
        datasetEnableReservation: false
        datasetPermissionsMode: "0777"
        datasetPermissionsUser: "nobody"
        datasetPermissionsGroup: "nogroup"
      nfs:
        shareHost: truenas1-nfs.torquasmvo.internal             # same as host or NFS VIP
        shareAlldirs: false
        shareAllowedHosts: ["10.0.0.0/8"]       # your cluster subnet(s)
        shareReadOnly: false
        shareMaprootUser: "nobody"
        shareMaprootGroup: "nogroup"
        shareMapallUser: ""
        shareMapallGroup: ""
  envFromSecrets:
    - name: truenas-credentials
