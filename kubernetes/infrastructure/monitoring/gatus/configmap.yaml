apiVersion: v1
kind: ConfigMap
metadata:
  name: gatus-config
  namespace: monitoring
data:
  config.yaml: |
    metrics: true
    ui:
      title: BrainiacOps Status
      header: Core services health
      logo: ""
    endpoints:
      - name: argocd
        group: platform
        description: GitOps control plane should be reachable
        url: https://argocd-server.argocd.svc.cluster.local/healthz
        client:
          insecure: true
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: portainer
        group: platform
        description: Portainer agent API for cluster management
        url: http://portainer.portainer.svc.cluster.local:9000/api/system/status
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: prometheus
        group: monitoring
        description: Prometheus /-/healthy endpoint
        url: http://kube-prometheus-stack-prometheus.monitoring.svc.cluster.local:9090/-/healthy
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: grafana
        group: monitoring
        description: Grafana API health endpoint
        url: http://kube-prometheus-stack-grafana.monitoring.svc.cluster.local/api/health
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: alertmanager
        group: monitoring
        description: Alertmanager ready endpoint
        url: http://kube-prometheus-stack-alertmanager.monitoring.svc.cluster.local:9093/-/ready
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: gatus
        group: monitoring
        description: Gatus UI should be reachable to view checks
        url: http://gatus.monitoring.svc.cluster.local/health
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: longhorn
        group: storage
        description: Longhorn UI root responds
        url: http://longhorn-frontend.longhorn-system.svc.cluster.local/
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: plex
        group: media
        description: Plex media server identity endpoint should be reachable
        url: http://plex.default.svc.cluster.local:32400/identity
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: traefik-edge
        group: networking
        description: TCP availability of the Traefik websecure entrypoint
        url: tcp://traefik.kube-system.svc.cluster.local:443
        interval: 1m
        conditions:
          - "[CONNECTED] == true"
      - name: traefik-dashboard
        group: networking
        description: Traefik dashboard API should respond on 8080
        url: http://traefik.kube-system.svc.cluster.local:8080/api/rawdata
        interval: 1m
        conditions:
          - "[STATUS] == 200"
      - name: cert-manager-webhook
        group: networking
        description: cert-manager webhook service reachable
        url: tcp://cert-manager-webhook.cert-manager.svc.cluster.local:443
        interval: 1m
        conditions:
          - "[CONNECTED] == true"
      - name: metallb-webhook
        group: networking
        description: MetalLB validating webhook reachable
        url: tcp://metallb-webhook-service.metallb-system.svc.cluster.local:443
        interval: 1m
        conditions:
          - "[CONNECTED] == true"
